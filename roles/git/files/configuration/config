[user]
  name = Thore Strassburg
  email = thore@strassburg.me
  signingkey = ~/.ssh/thore.pub
  ; signingkey = 0A2ABC21BD50D9FF

[commit]
  gpgsign = true
  verbose = true

[gpg]
  format = ssh

[gpg "ssh"]
	allowedSignersFile = ~/.config/git/allowed-signers-file

[pull]
  rebase = true

[core]
  pager = delta

[alias]
  s  = status
  ss = status .
  rv = remote -v
  ch = checkout HEAD
  sm = "!git switch $(git master-or-main)"
  ll = log --oneline
  lm = "!git log --oneline $(git master-or-main).."
  master-or-main = "!git branch --format='%(refname:short)' | grep master || echo 'main'"
  fw = "!git log --pretty=oneline --all | grep -B1 `git rev-parse HEAD` | head -n1 | egrep -o '[a-f0-9]{20,}' | xargs git checkout"
  bv = branch -vv
  recent = "!r(){ git for-each-ref --sort=-committerdate refs/heads --color=always --format='%(HEAD)%(color:yellow)%(refname:short)|%(color:bold green)%(committerdate:relative)|%(color:blue)%(subject)|%(color:magenta)%(authorname)%(color:reset)'|column -ts'|';}; r"
  graph = log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all
  files = diff-tree --no-commit-id --name-only -r
  retry-commit = "!f() { git commit --edit --file=$(git rev-parse --git-dir)/COMMIT_EDITMSG; }; f"

[merge]
  tool = vimdiff

[mergetool]
  keepBackup = false

[mergetool "vimdiff"]
  cmd = "nvim -c DiffviewOpen"

[rebase]
  autostash = true

[log]
  follow = true

[delta]
  navigate = true
  side-by-side = true

[filter "black"]
  clean = black -
  smudge = black -l 120 -

# vim: filetype=gitconfig
[credential "https://github.com"]
	helper = 
	helper = !/usr/bin/gh auth git-credential
